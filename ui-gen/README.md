# UI generation from EHR data descriptions

This module is able to generate UIs from health data constraints (openEHR, HL7 FHIR) in different output formats. For the GLEAN project, it is used to print HTML+RDFa data input forms from HL7 FHIR ActivityDefinition resources. For details on the code generation process, please check the [publication](http://ceur-ws.org/Vol-3055/paper4.pdf).

See the [UiGen](src/wvw/cig/uigen/UiGen.java) class to run the UI code generation process. For an example on how this code is being called, see [CIGWorkflowPrinter](https://github.com/william-vw/glean/blob/main/glean-core/src/main/java/wvw/glean/cig/CIGWorkflowPrinter.java).

**Note**: whenever `ui_codes.n3` files are modified (i.e., files defining snippets for a particular UI format), the `UiGen#prepare` method with corresponding parameters should be called first. See the `UiGen#main` method for examples. (Currently, the `ui_codes.n3` file for self-contained HTML+RDFa files, i.e., incl. a header file, contains an absolute file path that should be updated for your system.)

## Resources

The `rules/` folder contains the N3 rules that generate the UI code.

The `ehr/[spec]` folders contain the EHR artifacts.

The `ui/[format]` folders contain the UI code snippets.

The `ehr/[spec]/out/[format]` subfolders contain the intermediary and final files generated by the N3 code.

To try out the generated HTML+RDFa UI files, clone the repository and open the HTML file (called ui.html) in the browser. After filling out some values and clicking submit, the generated RDF code should appear in the developer console.

Trying out the generated Yail files is currently a bit more involved - one has to generate an appropriate .zip archive and upload it as an external project to a Punya instance. Future work involves making this process easier.
